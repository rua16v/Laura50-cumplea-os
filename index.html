<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
<meta name="theme-color" content="#0e0e12" />
<title>Laura — 50 grandes éxitos de mi vida</title>
<style>
  :root{--bg:#0e0e12;--text:#fff;--muted:#b6b6c6;--hero-y:62%}
  *{box-sizing:border-box}
  body{
    margin:0;
    font-family: system-ui, -apple-system, Segoe UI, Roboto, Inter, Arial, sans-serif;
    background: radial-gradient(1200px 800px at 10% 10%, #1a1a26, var(--bg));
    color: var(--text);
    padding-left:max(0px,env(safe-area-inset-left));
    padding-right:max(0px,env(safe-area-inset-right));
  }
  header.hero{position:relative; overflow:hidden; min-height:100svh;}
  .hero::before{
    content:""; position:absolute; inset:0;
    /* Portada (Drive) */
    background-image:url('https://lh3.googleusercontent.com/d/1UY99dfV9phWzYvwTspN7wuz9i1vbzHLP');
    background-size:cover; background-position:center var(--hero-y);
    filter:saturate(112%) contrast(104%) brightness(86%);
  }
  .hero::after{
    content:""; position:absolute; inset:0;
    background: radial-gradient(60% 52% at 50% 24%, rgba(0,0,0,.10) 0%, rgba(0,0,0,.48) 58%, rgba(0,0,0,.72) 100%);
  }
  .gold{
    position:absolute; left:50%; top:76%; transform:translate(-50%,-50%);
    width:min(88vw,820px); text-align:center; display:flex; gap:.5rem; flex-direction:column;
    padding-bottom:calc(env(safe-area-inset-bottom) + 10px);
  }
  @media (min-width:900px){
    .gold{left:6vw; transform:translateY(-50%); text-align:left; width:min(48vw,860px); top:74%;}
  }
  .gold h1{
    margin:0; font-weight:900; letter-spacing:.06em;
    background: linear-gradient(100deg,#fff5d2 0%, #f6d077 18%, #d5a848 52%, #c59037 72%, #fff2c6 100%);
    -webkit-background-clip:text; background-clip:text; color:transparent;
    text-shadow:0 0 2px rgba(255,209,102,.22), 0 10px 22px rgba(0,0,0,.42);
    font-size: clamp(2.5rem, 9vw, 6rem); line-height:.95;
  }
  .gold h2{
    margin:0; font-weight:700; letter-spacing:.04em;
    background: linear-gradient(135deg,#FFF4C6,#F6CF6B 45%,#D7A647 85%);
    -webkit-background-clip:text; background-clip:text; color:transparent;
    text-shadow:0 0 2px rgba(255,209,102,.16);
    font-size: clamp(1rem, 3.2vw, 1.8rem);
  }
  main{max-width:1100px; margin:-1.5rem auto 4rem; padding: 0 1rem;}
  .panel{background: rgba(23,23,32,.86); border:1px solid rgba(255,255,255,.08);
         border-radius:20px; padding:1rem; backdrop-filter: blur(6px);}
  .toolbar{display:flex; gap:.75rem; align-items:center; justify-content:space-between; flex-wrap:wrap; padding:.75rem;}
  .search{flex:1 1 280px;}
  .search input{width:100%; padding:.75rem 1rem; border-radius:12px; border:1px solid rgba(255,255,255,.1); background:#12121a; color:var(--text); outline:none; font-size:16px;}
  .search input::placeholder{color:#9aa}
  .counter{color: var(--muted); font-size:.95rem;}
  .list{display:flex; flex-direction:column; gap:.5rem; padding:.5rem;}
  .song{border:1px solid rgba(255,255,255,.08); border-radius:14px; overflow:hidden; background: linear-gradient(160deg, rgba(255,255,255,.02), rgba(255,255,255,.0));}
  .song__title{margin:0; padding:.95rem 1rem; cursor:pointer; font-weight:700; display:flex; align-items:center; justify-content:space-between; gap:.75rem;}
  .song__title:hover{ background: rgba(255,255,255,.03); }
  .song__title:focus-visible{ outline:2px solid #f6cf6b; outline-offset:-2px; border-radius:10px;}
  .caret{ transition: transform .25s ease; opacity:.9; }
  .song[aria-expanded="true"] .caret{ transform: rotate(90deg); }
  .song__content{ max-height:0; overflow:hidden; transition:max-height .35s ease; padding:0 1rem; }
  .song[aria-expanded="true"] .song__content{ padding:.6rem 1rem 1rem; }
  .player,.lyrics{width:100%; border:none; border-radius:12px; background:#0f0f16}
  .player{ height: 190px; }
  .lyrics{ height: 220px; margin-top:.6rem; }
  footer{ text-align:center; color:#b6b6c6; padding:2rem 1rem; }
  .hint{ display:block; text-align:center; color:#9aa; font-size:.9rem; margin-top:.25rem;}
</style>
</head>
<body>
  <header class="hero">
    <div class="gold" aria-label="Portada del álbum">
      <h1>LAURA</h1>
      <h2>50 GRANDES ÉXITOS DE MI VIDA</h2>
    </div>
  </header>

  <main>
    <section class="panel" aria-label="Listado de canciones">
      <div class="toolbar">
        <div class="search">
          <input id="search" type="search" placeholder="Buscar canción por título…" aria-label="Buscar canción" />
          <small class="hint">Si no se cargan los reproductores, abre en el navegador del móvil.</small>
        </div>
        <div class="counter"><span id="count">0</span> canciones</div>
      </div>
      <div class="list" id="list"></div>
    </section>
  </main>

  <footer>© <span id="year"></span> Laura — 50 grandes éxitos de mi vida · v31</footer>

<script>
  // Año en footer
  document.getElementById('year').textContent = new Date().getFullYear();

  // Utilidades
  function stripDiacritics(t){ try { return t.normalize('NFD').replace(/\p{Diacritic}/gu,''); } catch { return t; } }
  function normalize(t){ return stripDiacritics((t||"").toLowerCase()); }
  function drivePreview(id){ return id ? "https://drive.google.com/file/d/"+encodeURIComponent(id)+"/preview" : ""; }

  // Datos (los que me pasaste)
  const SONGS = [
    {"number":null,"title":".Desde el Cielo - En memoria de Rosario y Amalia","mp3Id":"1M0yJx01F3yEdsbWVneSd62pbhPoH9-yD","lyricsId":"1TWjOEJSwp0EDZY6eO4hCXdpyoIHfdeXL","lyricsInline":""},
    {"number":null,"title":"19 diciembres - Jose Luis Juan","mp3Id":"1An42oLlTb5DQLjb7-2tkg48fVMi5uY4M","lyricsId":"1Q7w_4WPSzcC0hTDr2QUlkG4Er_re4Rrj","lyricsInline":""},
    {"number":null,"title":"A su ritmo y con sabor - Carlos, Lita , Carlota, Andrea y Marta","mp3Id":"13Q6nVVxhGwLl0DS9MnXrcz844SFyKFna","lyricsId":"1bdigBSjdfEHutZZ3_JCQO9n8qpDLeLku","lyricsInline":""},
    {"number":null,"title":"Aeropuertos, vientos y minifaldas - Santi Oviedo","mp3Id":"1UHjEtIYAENQfm524aLU34XUgI7lJns9N","lyricsId":"1fx8-s1hmPfcKE6vT3Jkk0kXlQS2lYF5S","lyricsInline":""},
    {"number":null,"title":"Cincuenta y brillando - Ana Juan","mp3Id":"1b2oTCO34eeSW_VGiiT1HKuUBbPEg6KS_","lyricsId":"1ecpdgZUt4OJws9IrUXZPl5afznGpasJg","lyricsInline":""},
    {"number":null,"title":"Dejadme vivir mi vida - Lidon-Millan","mp3Id":"1wLnvmqzegz-GduFLtAlmU1B8bbjnEh5H","lyricsId":"1dhcBBqR4ryP3VyZlRfMppLlA7VNkXcdj","lyricsInline":""},
    {"number":null,"title":"Desde aquel diciembre - Dani Juan","mp3Id":"1gPqi07qFSjOekHJxmMC2L4wbnDKXXrUH","lyricsId":"1zmL-k5RwmqjFWn7cFEnCdUF7Znfgrw4K","lyricsInline":""},
    {"number":null,"title":"En el gotico te conoci - Mª Angeles Juan y Ramon Rosines","mp3Id":"15N6mH1WNHWKoB856fQ7sy3ZR7m8fSOar","lyricsId":"1gYhHt4rCTzq_-UqY7Nna-EcNTbzzGGyz","lyricsInline":""},
    {"number":null,"title":"Entre Excells y risas - Silvia Muñoz","mp3Id":"1xPHdD_sZpcq3EMjjq_ugKjUeHa8I_YTS","lyricsId":"10xF7AzH37780IXCzDhRlhk4QjlHv2bu8","lyricsInline":""},
    {"number":null,"title":"La amistad no mide frecuencias- La Salle Band","mp3Id":"1a67HZclr4upPg7YNR-k3Mrvx5u5GSg7x","lyricsId":"1P9_Nv8as2IxF4dqiaBbLH_BWCzVjR7kN","lyricsInline":""},
    {"number":null,"title":"La chica del octavo nivel - Javi y Manoli","mp3Id":"1YH_O-Xc24XGfbnwB4VQSrIM_GTl_XOhf","lyricsId":"1zSQ1zzCyLc54FICNSiIKCjWJoAj5ZWOr","lyricsInline":""},
    {"number":null,"title":"La familia que elegimos - Andres, Pili, Ana y Carol","mp3Id":"1RjEFyqAhUvtW-Dyl_xiyWFS6UehATsb0","lyricsId":"1TRtM4CcdYSFRURkQo_H00xU2MELOj-3W","lyricsInline":""},
    {"number":null,"title":"La mesa de quesos - O'hara Valdivia","mp3Id":"1Q2NZUWuSVz2wNrobBFh3ctMxspBy9HMM","lyricsId":"1WfVTyG1xawosc_R3TUumwTVu4upQnRwr","lyricsInline":""},
    {"number":null,"title":"La rajadura - Beti","mp3Id":"14QPE0DcMXO5f0GJadhmBT1lhtgsgKWEx","lyricsId":"1gB2ZqeUGWwRJJIDYHj4M-RSaNJusS2XS","lyricsInline":""},
    {"number":null,"title":"Las chicas sushi - The Sushis & The Mariditos","mp3Id":"1AK217eluO2Mdx1gjHVUmfePTLLa4KdXc","lyricsId":"1Bci84azUhLdvJ_3WcqTvhpYBwMV663w2","lyricsInline":""},
    {"number":null,"title":"Las lentejas de Reus - Monica","mp3Id":"1EEYqAZ7hxS1az5BcgMMQEtGDjfW6EIJb","lyricsId":"1ifymf6rmNcHFFG5IYizJBzHPKvyQpIYb","lyricsInline":""},
    {"number":null,"title":"Laura, llum que il.lumina - Laia, Arlet y Marc","mp3Id":"1BrEX78Q7B0_yGAeUj9r5ogSqxwHi3tE6","lyricsId":"1czZKrWBwMHdK5f8vp3Shz6KXBbnMP9c0","lyricsInline":""},
    {"number":null,"title":"Los cuatro del plan perfecto - Jose, Dani y Ana","mp3Id":"1PG5jKN34ca-fYSzsrzwEzv1G-NHBzFvH","lyricsId":"1N9C4d2A6aMlN5WaQo5oPSRy_KrsbQXcJ","lyricsInline":""},
    {"number":null,"title":"Los Miserables - Mercedes y Aleix","mp3Id":"1BUWfqTN-T8y_CHbqJV68Jt6E30hWlqj2","lyricsId":"1lGAzlWYBnLBvM3dTiFnaQN2Clfog21yu","lyricsInline":""},
    {"number":null,"title":"Los pastores - Sergio Oviedo","mp3Id":"1uuNaCy45TEsXuKv2MzC9CNIAn04FZ5s4","lyricsId":"1UAjprcx3HGwAjJYkX-XrKlJFm6nHMb45","lyricsInline":""},
    {"number":null,"title":"Maquillada para brillar - Pilar Toribio","mp3Id":"1TeNFUW49xIAh9Nwia_44gYHePERpurLG","lyricsId":"1WW1tlDFhydEuSWb4fTFEgHLzz2B5uI2y","lyricsInline":""},
    {"number":null,"title":"No soy muy morcillera- Agora Band","mp3Id":"1WD-dLFhC494jQZar1velXp1QNHQsts7Y","lyricsId":"13APo9NmldbRmVBNAfJSUQVwzDur2iERI","lyricsInline":""},
    {"number":null,"title":"Ojos cerrados - Cristina Morbin","mp3Id":"15uo0-lnYPO5UCyUYQjaf6ucRqyNXP-MX","lyricsId":"1kMycr0fwi56khfFyqXBXc5UFkpa6SFom","lyricsInline":""},
    {"number":null,"title":"Otra no puede haber - Pilar y Alberto","mp3Id":"17ZTovQf6xIFah34t4tbpLxCE7PKFlTkW","lyricsId":"1MNSX40tSNnfjpZ7d0qIUqa18AUndtoQI","lyricsInline":""},
    {"number":null,"title":"Pintate los labios - Esther Antequera","mp3Id":"1BvagL2WU0geWXCnTjXbkdQn4VGMGrQ4k","lyricsId":"1EXNTrDnzFHOoFeT5LQonPYObqSrxEEsS","lyricsInline":""},
    {"number":null,"title":"Recuerdos mil - Biel Rua","mp3Id":"1IVkIKDDyGczLWDyvXLdpIYfwSDxtwpS8","lyricsId":"1mjGhDLKQRt-PxcUAdas48Abf1tOG0W2C","lyricsInline":""},
    {"number":null,"title":"Ritmo familiar - Cristina Oviedo","mp3Id":"1AytSfsZojSshu1R24_-0go8kWbCx2rg9","lyricsId":"12NneLZiVs1Wh3GA7fWSFxr7E9q2R3WgD","lyricsInline":""},
    {"number":null,"title":"Siempre en mi equipo - Jose R. Rua","mp3Id":"1ZEyZOJ-pZnbB09DZvNjy5ICG55_Y9i5Q","lyricsId":"1AijbYpxLphphsOU6IW93NRIwPqIZOvKf","lyricsInline":""},
    {"number":null,"title":"Siempre tu - Sara Sanchez","mp3Id":"1IIiFq0_mPxgZIEQLeszImfeFOC4cVy6m","lyricsId":"1iUqAVrkncBAPcwVKsFKiL6Ffd-3prQwZ","lyricsInline":""},
    {"number":null,"title":"Tardes de Cinexin - Mario Gonzalez","mp3Id":"1mR3ID3pFov0AKHXWKo_8oLkLWBtjINhJ","lyricsId":"1RgSnIeFew8nugwadnWDUMrNvbHw1Zn-f","lyricsInline":""},
    {"number":null,"title":"Tortilla de atun- Isa, Encarna y Rosario","mp3Id":"11PehOTkdF0CTQxiAnRQDvg7RUMk3kkdY","lyricsId":"1Lvd0W3mxTyEYUih7LNSYpj6O1tZBpgMN","lyricsInline":""},
    {"number":null,"title":"Un brindis por ti - Nuri, Ralf y Alexandra","mp3Id":"1_lRCueKG2Xttvyv0ieF7FJP8vY9fPR76","lyricsId":"1GTl3kEWRqhSdsG9t9v1YiX4bJ4FKk8QZ","lyricsInline":""},
    {"number":null,"title":"Un capitulo de Crims - Sergio Sanchez y Esther","mp3Id":"1jC_b6QH-xV5-FCsSoV7iJVehCqgGeZnO","lyricsId":"1yVl5oUcZq-cfJeXfgXlAqDS_ojtgpCm8","lyricsInline":""},
    {"number":null,"title":"Yo me voy a casa - Ivan Forne","mp3Id":"12lVKma3sRqWYltbQV4dQq3QV84yLAHWl","lyricsId":"1ConHJrVtYLqrvumdpD5ZRKdyD63mCOTj","lyricsInline":""},
    {"number":null,"title":"Yo no soy muy morcillera- Agora Band","mp3Id":"1GI_FlSRDHkDq62qdxPLuW3aoDCSL9ORz","lyricsId":"1LjI2lF2emBiY2cTsWFZPzQEUhE84AnNb","lyricsInline":""}
  ];

  const list = document.getElementById('list');
  const count = document.getElementById('count');
  const search = document.getElementById('search');

  // Control: solo un tema abierto/sonando
  let openItem = null;

  function destroyIframes(container){
    Array.from(container.querySelectorAll('iframe')).forEach(ifr => {
      try { ifr.src = 'about:blank'; } catch(e){}
      ifr.remove();
    });
  }

  function collapse(item){
    const content = item.querySelector('.song__content');
    item.setAttribute('aria-expanded','false');
    content.style.maxHeight = '0px';
    destroyIframes(content);        // corta el audio al cerrar
    item._mounted = false;          // permitirá volver a crear iframes al reabrir
  }

  function expand(item){
    const content = item.querySelector('.song__content');
    item.setAttribute('aria-expanded','true');
    requestAnimationFrame(()=>{ content.style.maxHeight = content.scrollHeight + 40 + 'px'; });
  }

  function mountContent(item, song){
    if (item._mounted) return;
    const content = item.querySelector('.song__content');
    // Reproductor (Drive preview del MP3)
    if (song.mp3Id){
      const audio = document.createElement('iframe');
      audio.className = 'player';
      audio.src = drivePreview(song.mp3Id);
      audio.loading = "lazy";
      audio.allow = "autoplay; fullscreen; encrypted-media; picture-in-picture";
      content.appendChild(audio);
    }
    // Letras (Drive preview del TXT)
    if (song.lyricsId){
      const lyr = document.createElement('iframe');
      lyr.className = 'lyrics';
      lyr.src = drivePreview(song.lyricsId);
      lyr.loading = "lazy";
      lyr.allow = "autoplay; fullscreen";
      content.appendChild(lyr);
    }
    item._mounted = true;
  }

  function render(data){
    list.innerHTML = "";
    openItem = null;
    data.forEach((s) => {
      const item = document.createElement('article');
      item.className = 'song';
      item.setAttribute('aria-expanded', 'false');
      item._mounted = false;

      const title = document.createElement('h3');
      title.className = 'song__title';
      title.innerHTML = "<span>" + (s.title || "Sin título") + "</span><span class='caret'>▶</span>";
      title.tabIndex = 0;

      const content = document.createElement('div');
      content.className = 'song__content';

      item.appendChild(title);
      item.appendChild(content);

      const toggle = ()=>{
        const expanded = item.getAttribute('aria-expanded') === 'true';
        if (expanded){
          collapse(item);
          openItem = null;
        } else {
          // Cerrar el anterior + detener su audio
          if (openItem && openItem !== item) collapse(openItem);
          // Cargar y abrir el nuevo
          mountContent(item, s);
          expand(item);
          openItem = item;
          item.scrollIntoView({behavior:'smooth', block:'start'});
        }
      };

      title.addEventListener('click', toggle);
      title.addEventListener('keydown', (e)=>{ if (e.key === 'Enter' || e.key === ' ') { e.preventDefault(); toggle(); } });

      list.appendChild(item);
    });
    count.textContent = data.length;
  }

  // Búsqueda (cierra el abierto para evitar audios colgando)
  search.addEventListener('input', () => {
    const q = normalize(search.value);
    if (openItem) { collapse(openItem); openItem = null; }
    const filtered = SONGS.filter(s => normalize(s.title).includes(q));
    render(filtered);
  });

  render(SONGS);
</script>
</body>
</html>
